name: "Deploy na main via PR"
on:
  push:
    branches: 
      - master

  workflow_dispatch:
    inputs:
      sync:
        description: "File synchronization"
        required: true
        default: "full"

jobs:
  deploy-master:
    # if: ${{ github.event.pull_request.merged }}
    name: "ðŸŽ‰ Deploy para produÃ§Ã£o"
    runs-on: ubuntu-latest
    steps:
      - name: "Pega o cÃ³digo mais recente"
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
      
      - name: "FTP Deploy"
        uses: milanmk/actions-file-deployer@master
        with:
          remote-protocol: "ftp"
          remote-host: "ftp.aportesea.com"
          remote-user: "u888089465.aportesea_user"
          remote-password: ${{ secrets.FTP_KEY }}
          remote-path: "/"
          local-path: "./dist"
          sync: "full"